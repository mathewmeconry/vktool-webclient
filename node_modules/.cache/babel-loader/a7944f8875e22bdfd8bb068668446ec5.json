{"ast":null,"code":"import _regeneratorRuntime from \"/home/mathias/Documents/privat/VK/vk-tool/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mathias/Documents/privat/VK/vk-tool/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/mathias/Documents/privat/VK/vk-tool/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mathias/Documents/privat/VK/vk-tool/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { UIActions } from \"./UIActions\";\nimport axios from 'axios';\nexport var DataActions = {\n  FETCH_USER: 'fetch_user',\n  GOT_USER: 'got_user',\n  FETCH_MEMBERS: 'fetch_members',\n  GOT_MEMBERS: 'got_members',\n  FETCH_RANKS: 'fetch_ranks',\n  GOT_RANKS: 'got_ranks',\n  FETCH_CONTACTS: 'fetch_contacts',\n  GOT_CONTACTS: 'got_contacts',\n  FETCH_ORDERS: 'fetch_orders',\n  GOT_ORDERS: 'got_orders',\n  FETCH_OPEN_ORDERS: 'fetch_open_orders',\n  GOT_OPEN_ORDERS: 'got_open_orders',\n  FETCH_BILLING_REPORTS: 'fetch_billing_reports',\n  GOT_BILLING_REPORTS: 'got_billing_reports',\n  ADD_BILLING_REPORT: 'add_billing_report',\n  APPROVE_BILLING_REPORT: 'approve_billing_report',\n  EDIT_BILLING_REPORT: 'edit_billing_report',\n  FETCH_COMPENSATION_ENTRIES: 'fetch_compensation_entries',\n  GOT_COMPENSATION_ENTRIES: 'got_compensation_entries',\n  ADD_COMPENSATION_ENTRY: 'add_compensation_entry',\n  FETCH_USERS: 'fetch_users',\n  GOT_USERS: 'got_users'\n};\nexport var Data =\n/*#__PURE__*/\nfunction () {\n  function Data() {\n    _classCallCheck(this, Data);\n  }\n\n  _createClass(Data, null, [{\n    key: \"fetchUser\",\n    value: function fetchUser() {\n      var filter = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return Data.fetchFromApi('http://localhost:8000/api/me', DataActions.FETCH_USER, DataActions.GOT_USER);\n    }\n  }, {\n    key: \"fetchContacts\",\n    value: function fetchContacts() {\n      var filter = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return Data.fetchFromApi('http://localhost:8000/api/contacts', DataActions.FETCH_CONTACTS, DataActions.GOT_CONTACTS);\n    }\n  }, {\n    key: \"fetchMembers\",\n    value: function fetchMembers() {\n      return Data.fetchFromApi('http://localhost:8000/api/members', DataActions.FETCH_MEMBERS, DataActions.GOT_MEMBERS);\n    }\n  }, {\n    key: \"fetchRanks\",\n    value: function fetchRanks() {\n      return Data.fetchFromApi('http://localhost:8000/api/ranks', DataActions.FETCH_RANKS, DataActions.GOT_RANKS);\n    }\n  }, {\n    key: \"fetchOrders\",\n    value: function fetchOrders() {\n      return Data.fetchFromApi('http://localhost:8000/api/orders', DataActions.FETCH_ORDERS, DataActions.GOT_ORDERS);\n    }\n  }, {\n    key: \"fetchOpenOrders\",\n    value: function fetchOpenOrders() {\n      return Data.fetchFromApi('http://localhost:8000/api/billing-reports/open', DataActions.FETCH_OPEN_ORDERS, DataActions.GOT_OPEN_ORDERS);\n    }\n  }, {\n    key: \"fetchBillingReports\",\n    value: function fetchBillingReports() {\n      return Data.fetchFromApi('http://localhost:8000/api/billing-reports', DataActions.FETCH_BILLING_REPORTS, DataActions.GOT_BILLING_REPORTS);\n    }\n  }, {\n    key: \"addBillingReport\",\n    value: function addBillingReport(data) {\n      var _this = this;\n\n      return (\n        /*#__PURE__*/\n        function () {\n          var _ref = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee(dispatch) {\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                      dispatch({\n                        type: DataActions.ADD_BILLING_REPORT\n                      });\n                      axios.put('http://localhost:8000/api/billing-reports', data, {\n                        withCredentials: true\n                      }).then(function (response) {\n                        dispatch({\n                          type: UIActions.NOTIFICATION_SUCCESS,\n                          payload: 'Gespeichert!'\n                        });\n                        dispatch(_this.fetchBillingReports());\n                      }).catch(function (error) {\n                        dispatch({\n                          type: UIActions.NOTIFICATION_ERROR,\n                          payload: 'Ooopss....! Versuche es später erneut'\n                        });\n                      });\n                    }));\n\n                  case 1:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, this);\n          }));\n\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }()\n      );\n    }\n  }, {\n    key: \"approveBillingReport\",\n    value: function approveBillingReport(id) {\n      var _this2 = this;\n\n      return (\n        /*#__PURE__*/\n        function () {\n          var _ref2 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee2(dispatch) {\n            return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n                      dispatch({\n                        type: DataActions.APPROVE_BILLING_REPORT,\n                        payload: id\n                      });\n                      axios.post('http://localhost:8000/api/billing-reports/approve', {\n                        '_id': id\n                      }, {\n                        withCredentials: true\n                      }).then(function (response) {\n                        dispatch({\n                          type: UIActions.NOTIFICATION_SUCCESS,\n                          payload: 'Genehmigt!'\n                        });\n                        dispatch(_this2.fetchBillingReports());\n                      }).catch(function (error) {\n                        dispatch({\n                          type: UIActions.NOTIFICATION_ERROR,\n                          payload: 'Ooopss....! Versuche es später erneut'\n                        });\n                      });\n                    }));\n\n                  case 1:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, _callee2, this);\n          }));\n\n          return function (_x2) {\n            return _ref2.apply(this, arguments);\n          };\n        }()\n      );\n    }\n  }, {\n    key: \"editBillingReport\",\n    value: function editBillingReport(data) {\n      var _this3 = this;\n\n      return (\n        /*#__PURE__*/\n        function () {\n          var _ref3 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee3(dispatch) {\n            return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n              while (1) {\n                switch (_context3.prev = _context3.next) {\n                  case 0:\n                    return _context3.abrupt(\"return\", new Promise(function (resolve, reject) {\n                      dispatch({\n                        type: DataActions.EDIT_BILLING_REPORT\n                      });\n                      axios.post('http://localhost:8000/api/billing-reports', data, {\n                        withCredentials: true\n                      }).then(function (response) {\n                        dispatch({\n                          type: UIActions.NOTIFICATION_SUCCESS,\n                          payload: 'Gespeichert!'\n                        });\n                        dispatch(_this3.fetchBillingReports());\n                      }).catch(function (error) {\n                        dispatch({\n                          type: UIActions.NOTIFICATION_ERROR,\n                          payload: 'Ooopss....! Versuche es später erneut'\n                        });\n                      });\n                    }));\n\n                  case 1:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }\n            }, _callee3, this);\n          }));\n\n          return function (_x3) {\n            return _ref3.apply(this, arguments);\n          };\n        }()\n      );\n    }\n  }, {\n    key: \"fetchCompensationEntries\",\n    value: function fetchCompensationEntries() {\n      return Data.fetchFromApi('http://localhost:8000/api/compensations', DataActions.FETCH_COMPENSATION_ENTRIES, DataActions.GOT_COMPENSATION_ENTRIES);\n    }\n  }, {\n    key: \"addCompensationEntry\",\n    value: function addCompensationEntry(data) {\n      var _this4 = this;\n\n      return (\n        /*#__PURE__*/\n        function () {\n          var _ref4 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee4(dispatch) {\n            return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n              while (1) {\n                switch (_context4.prev = _context4.next) {\n                  case 0:\n                    return _context4.abrupt(\"return\", new Promise(function (resolve, reject) {\n                      dispatch({\n                        type: DataActions.ADD_COMPENSATION_ENTRY\n                      });\n                      axios.put('http://localhost:8000/api/compensations', data, {\n                        withCredentials: true\n                      }).then(function (response) {\n                        dispatch({\n                          type: UIActions.NOTIFICATION_SUCCESS,\n                          payload: 'Gespeichert!'\n                        });\n                        dispatch(_this4.fetchCompensationEntries());\n                      }).catch(function (error) {\n                        dispatch({\n                          type: UIActions.NOTIFICATION_ERROR,\n                          payload: 'Ooopss....! Versuche es später erneut'\n                        });\n                      });\n                    }));\n\n                  case 1:\n                  case \"end\":\n                    return _context4.stop();\n                }\n              }\n            }, _callee4, this);\n          }));\n\n          return function (_x4) {\n            return _ref4.apply(this, arguments);\n          };\n        }()\n      );\n    }\n  }, {\n    key: \"fetchUsers\",\n    value: function fetchUsers() {\n      return Data.fetchFromApi('http://localhost:8000/api/users', DataActions.FETCH_USERS, DataActions.GOT_USERS);\n    }\n  }, {\n    key: \"fetchFromApi\",\n    value: function fetchFromApi(route, fetchAction, gotAction) {\n      return (\n        /*#__PURE__*/\n        function () {\n          var _ref5 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee5(dispatch) {\n            return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n              while (1) {\n                switch (_context5.prev = _context5.next) {\n                  case 0:\n                    return _context5.abrupt(\"return\", new Promise(function (resolve, reject) {\n                      dispatch({\n                        type: fetchAction\n                      });\n                      axios.get(route, {\n                        withCredentials: true\n                      }).then(function (response) {\n                        var data = Data.deepParser(response.data);\n                        resolve(dispatch({\n                          type: gotAction,\n                          payload: data\n                        }));\n                      }).catch(function (error) {\n                        console.log(error);\n\n                        if (error.response && error.response.status === 401) {\n                          dispatch({\n                            type: UIActions.NOTIFICATION_ERROR,\n                            payload: 'Permission denied!'\n                          });\n                        } else {\n                          dispatch({\n                            type: UIActions.NOTIFICATION_ERROR,\n                            payload: 'Ooopss....! Versuche es später erneut'\n                          });\n                        }\n                      });\n                    }));\n\n                  case 1:\n                  case \"end\":\n                    return _context5.stop();\n                }\n              }\n            }, _callee5, this);\n          }));\n\n          return function (_x5) {\n            return _ref5.apply(this, arguments);\n          };\n        }()\n      );\n    }\n  }, {\n    key: \"deepParser\",\n    value: function deepParser(data) {\n      if (data instanceof Array || typeof data === 'object') {\n        for (var i in data) {\n          data[i] = Data.deepParser(data[i]);\n        }\n\n        return data;\n      } else {\n        var dateRegex = /[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])T(2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9].[0-9][0-9][0-9]Z/;\n\n        if (dateRegex.test(data)) {\n          return new Date(data);\n        } else {\n          return data;\n        }\n      }\n    }\n  }]);\n\n  return Data;\n}();","map":{"version":3,"sources":["/home/mathias/Documents/privat/VK/vk-tool/src/app/actions/DataActions.ts"],"names":["UIActions","axios","DataActions","FETCH_USER","GOT_USER","FETCH_MEMBERS","GOT_MEMBERS","FETCH_RANKS","GOT_RANKS","FETCH_CONTACTS","GOT_CONTACTS","FETCH_ORDERS","GOT_ORDERS","FETCH_OPEN_ORDERS","GOT_OPEN_ORDERS","FETCH_BILLING_REPORTS","GOT_BILLING_REPORTS","ADD_BILLING_REPORT","APPROVE_BILLING_REPORT","EDIT_BILLING_REPORT","FETCH_COMPENSATION_ENTRIES","GOT_COMPENSATION_ENTRIES","ADD_COMPENSATION_ENTRY","FETCH_USERS","GOT_USERS","Data","filter","fetchFromApi","data","dispatch","Promise","resolve","reject","type","put","withCredentials","then","response","NOTIFICATION_SUCCESS","payload","fetchBillingReports","catch","error","NOTIFICATION_ERROR","id","post","fetchCompensationEntries","route","fetchAction","gotAction","get","deepParser","console","log","status","Array","i","dateRegex","test","Date"],"mappings":";;;;AAAA,SAASA,SAAT,QAA0B,aAA1B;AAKA,OAAOC,KAAP,MAAiD,OAAjD;AAGA,OAAO,IAAMC,WAAW,GAAG;AACvBC,EAAAA,UAAU,EAAE,YADW;AAEvBC,EAAAA,QAAQ,EAAE,UAFa;AAIvBC,EAAAA,aAAa,EAAE,eAJQ;AAKvBC,EAAAA,WAAW,EAAE,aALU;AAOvBC,EAAAA,WAAW,EAAE,aAPU;AAQvBC,EAAAA,SAAS,EAAE,WARY;AAUvBC,EAAAA,cAAc,EAAE,gBAVO;AAWvBC,EAAAA,YAAY,EAAE,cAXS;AAavBC,EAAAA,YAAY,EAAE,cAbS;AAcvBC,EAAAA,UAAU,EAAE,YAdW;AAgBvBC,EAAAA,iBAAiB,EAAE,mBAhBI;AAiBvBC,EAAAA,eAAe,EAAE,iBAjBM;AAmBvBC,EAAAA,qBAAqB,EAAE,uBAnBA;AAoBvBC,EAAAA,mBAAmB,EAAE,qBApBE;AAqBvBC,EAAAA,kBAAkB,EAAE,oBArBG;AAsBvBC,EAAAA,sBAAsB,EAAE,wBAtBD;AAuBvBC,EAAAA,mBAAmB,EAAE,qBAvBE;AAyBvBC,EAAAA,0BAA0B,EAAE,4BAzBL;AA0BvBC,EAAAA,wBAAwB,EAAE,0BA1BH;AA2BvBC,EAAAA,sBAAsB,EAAE,wBA3BD;AA6BvBC,EAAAA,WAAW,EAAE,aA7BU;AA8BvBC,EAAAA,SAAS,EAAE;AA9BY,CAApB;AAiCP,WAAaC,IAAb;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,gCAC0G;AAAA,UAA9EC,MAA8E,uEAA7D,EAA6D;AAClG,aAAOD,IAAI,CAACE,YAAL,CAAkB,8BAAlB,EAAkDzB,WAAW,CAACC,UAA9D,EAA0ED,WAAW,CAACE,QAAtF,CAAP;AACH;AAHL;AAAA;AAAA,oCAK8G;AAAA,UAA9EsB,MAA8E,uEAA7D,EAA6D;AACtG,aAAOD,IAAI,CAACE,YAAL,CAAkB,oCAAlB,EAAwDzB,WAAW,CAACO,cAApE,EAAoFP,WAAW,CAACQ,YAAhG,CAAP;AACH;AAPL;AAAA;AAAA,mCAS0F;AAClF,aAAOe,IAAI,CAACE,YAAL,CAAkB,mCAAlB,EAAuDzB,WAAW,CAACG,aAAnE,EAAkFH,WAAW,CAACI,WAA9F,CAAP;AACH;AAXL;AAAA;AAAA,iCAawF;AAChF,aAAOmB,IAAI,CAACE,YAAL,CAAkB,iCAAlB,EAAqDzB,WAAW,CAACK,WAAjE,EAA8EL,WAAW,CAACM,SAA1F,CAAP;AACH;AAfL;AAAA;AAAA,kCAiByF;AACjF,aAAOiB,IAAI,CAACE,YAAL,CAAkB,kCAAlB,EAAsDzB,WAAW,CAACS,YAAlE,EAAgFT,WAAW,CAACU,UAA5F,CAAP;AACH;AAnBL;AAAA;AAAA,sCAqB6F;AACrF,aAAOa,IAAI,CAACE,YAAL,CAAkB,gDAAlB,EAAoEzB,WAAW,CAACW,iBAAhF,EAAmGX,WAAW,CAACY,eAA/G,CAAP;AACH;AAvBL;AAAA;AAAA,0CAyBiG;AACzF,aAAOW,IAAI,CAACE,YAAL,CAAkB,2CAAlB,EAA+DzB,WAAW,CAACa,qBAA3E,EAAkGb,WAAW,CAACc,mBAA9G,CAAP;AACH;AA3BL;AAAA;AAAA,qCA6BmCY,IA7BnC,EA6BoH;AAAA;;AAC5G;AAAA;AAAA;AAAA;AAAA;AAAA,mCAAO,iBAAOC,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA,qDACI,IAAIC,OAAJ,CAAuB,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC/CH,sBAAAA,QAAQ,CAAC;AACLI,wBAAAA,IAAI,EAAE/B,WAAW,CAACe;AADb,uBAAD,CAAR;AAIAhB,sBAAAA,KAAK,CAACiC,GAAN,CAAU,2CAAV,EAAuDN,IAAvD,EAA6D;AAAEO,wBAAAA,eAAe,EAAE;AAAnB,uBAA7D,EAAwFC,IAAxF,CAA6F,UAACC,QAAD,EAAc;AACvGR,wBAAAA,QAAQ,CAAC;AACLI,0BAAAA,IAAI,EAAEjC,SAAS,CAACsC,oBADX;AAELC,0BAAAA,OAAO,EAAE;AAFJ,yBAAD,CAAR;AAIAV,wBAAAA,QAAQ,CAAC,KAAI,CAACW,mBAAL,EAAD,CAAR;AACH,uBAND,EAMGC,KANH,CAMS,UAACC,KAAD,EAAW;AAChBb,wBAAAA,QAAQ,CAAC;AACLI,0BAAAA,IAAI,EAAEjC,SAAS,CAAC2C,kBADX;AAELJ,0BAAAA,OAAO,EAAE;AAFJ,yBAAD,CAAR;AAIH,uBAXD;AAYH,qBAjBM,CADJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBH;AAlDL;AAAA;AAAA,yCAoDuCK,EApDvC,EAoD4G;AAAA;;AACpG;AAAA;AAAA;AAAA;AAAA;AAAA,mCAAO,kBAAOf,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA,sDACI,IAAIC,OAAJ,CAAuB,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC/CH,sBAAAA,QAAQ,CAAC;AACLI,wBAAAA,IAAI,EAAE/B,WAAW,CAACgB,sBADb;AAELqB,wBAAAA,OAAO,EAAEK;AAFJ,uBAAD,CAAR;AAKA3C,sBAAAA,KAAK,CAAC4C,IAAN,CAAW,mDAAX,EAAgE;AAAE,+BAAOD;AAAT,uBAAhE,EAA+E;AAAET,wBAAAA,eAAe,EAAE;AAAnB,uBAA/E,EAA0GC,IAA1G,CAA+G,UAACC,QAAD,EAAc;AACzHR,wBAAAA,QAAQ,CAAC;AACLI,0BAAAA,IAAI,EAAEjC,SAAS,CAACsC,oBADX;AAELC,0BAAAA,OAAO,EAAE;AAFJ,yBAAD,CAAR;AAIAV,wBAAAA,QAAQ,CAAC,MAAI,CAACW,mBAAL,EAAD,CAAR;AACH,uBAND,EAMGC,KANH,CAMS,UAACC,KAAD,EAAW;AAChBb,wBAAAA,QAAQ,CAAC;AACLI,0BAAAA,IAAI,EAAEjC,SAAS,CAAC2C,kBADX;AAELJ,0BAAAA,OAAO,EAAE;AAFJ,yBAAD,CAAR;AAIH,uBAXD;AAYH,qBAlBM,CADJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAsBH;AA3EL;AAAA;AAAA,sCA6EoCX,IA7EpC,EA6EwG;AAAA;;AAChG;AAAA;AAAA;AAAA;AAAA;AAAA,mCAAO,kBAAOC,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA,sDACI,IAAIC,OAAJ,CAAuB,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC/CH,sBAAAA,QAAQ,CAAC;AACLI,wBAAAA,IAAI,EAAE/B,WAAW,CAACiB;AADb,uBAAD,CAAR;AAIAlB,sBAAAA,KAAK,CAAC4C,IAAN,CAAW,2CAAX,EAAwDjB,IAAxD,EAA8D;AAAEO,wBAAAA,eAAe,EAAE;AAAnB,uBAA9D,EAAyFC,IAAzF,CAA8F,UAACC,QAAD,EAAc;AACxGR,wBAAAA,QAAQ,CAAC;AACLI,0BAAAA,IAAI,EAAEjC,SAAS,CAACsC,oBADX;AAELC,0BAAAA,OAAO,EAAE;AAFJ,yBAAD,CAAR;AAIAV,wBAAAA,QAAQ,CAAC,MAAI,CAACW,mBAAL,EAAD,CAAR;AACH,uBAND,EAMGC,KANH,CAMS,UAACC,KAAD,EAAW;AAChBb,wBAAAA,QAAQ,CAAC;AACLI,0BAAAA,IAAI,EAAEjC,SAAS,CAAC2C,kBADX;AAELJ,0BAAAA,OAAO,EAAE;AAFJ,yBAAD,CAAR;AAIH,uBAXD;AAYH,qBAjBM,CADJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAqBH;AAnGL;AAAA;AAAA,+CAqGsG;AAC9F,aAAOd,IAAI,CAACE,YAAL,CAAkB,yCAAlB,EAA6DzB,WAAW,CAACkB,0BAAzE,EAAqGlB,WAAW,CAACmB,wBAAjH,CAAP;AACH;AAvGL;AAAA;AAAA,yCAyGuCO,IAzGvC,EAyGyH;AAAA;;AACjH;AAAA;AAAA;AAAA;AAAA;AAAA,mCAAO,kBAAOC,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA,sDACI,IAAIC,OAAJ,CAAuB,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC/CH,sBAAAA,QAAQ,CAAC;AACLI,wBAAAA,IAAI,EAAE/B,WAAW,CAACoB;AADb,uBAAD,CAAR;AAIArB,sBAAAA,KAAK,CAACiC,GAAN,CAAU,yCAAV,EAAqDN,IAArD,EAA2D;AAAEO,wBAAAA,eAAe,EAAE;AAAnB,uBAA3D,EAAsFC,IAAtF,CAA2F,UAACC,QAAD,EAAc;AACrGR,wBAAAA,QAAQ,CAAC;AACLI,0BAAAA,IAAI,EAAEjC,SAAS,CAACsC,oBADX;AAELC,0BAAAA,OAAO,EAAE;AAFJ,yBAAD,CAAR;AAIAV,wBAAAA,QAAQ,CAAC,MAAI,CAACiB,wBAAL,EAAD,CAAR;AACH,uBAND,EAMGL,KANH,CAMS,UAACC,KAAD,EAAW;AAChBb,wBAAAA,QAAQ,CAAC;AACLI,0BAAAA,IAAI,EAAEjC,SAAS,CAAC2C,kBADX;AAELJ,0BAAAA,OAAO,EAAE;AAFJ,yBAAD,CAAR;AAIH,uBAXD;AAYH,qBAjBM,CADJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBH;AA9HL;AAAA;AAAA,iCAgIwF;AAChF,aAAOd,IAAI,CAACE,YAAL,CAAkB,iCAAlB,EAAqDzB,WAAW,CAACqB,WAAjE,EAA8ErB,WAAW,CAACsB,SAA1F,CAAP;AACH;AAlIL;AAAA;AAAA,iCAoIgCuB,KApIhC,EAoI+CC,WApI/C,EAoIoEC,SApIpE,EAoIgJ;AACxI;AAAA;AAAA;AAAA;AAAA;AAAA,mCAAO,kBAAOpB,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA,sDACI,IAAIC,OAAJ,CAAuB,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC/CH,sBAAAA,QAAQ,CAAC;AACLI,wBAAAA,IAAI,EAAEe;AADD,uBAAD,CAAR;AAIA/C,sBAAAA,KAAK,CAACiD,GAAN,CAAUH,KAAV,EAAiB;AAAEZ,wBAAAA,eAAe,EAAE;AAAnB,uBAAjB,EAA4CC,IAA5C,CAAiD,UAAAC,QAAQ,EAAI;AACzD,4BAAIT,IAAI,GAAGH,IAAI,CAAC0B,UAAL,CAAgBd,QAAQ,CAACT,IAAzB,CAAX;AAEAG,wBAAAA,OAAO,CAACF,QAAQ,CAAC;AACbI,0BAAAA,IAAI,EAAEgB,SADO;AAEbV,0BAAAA,OAAO,EAAEX;AAFI,yBAAD,CAAT,CAAP;AAIH,uBAPD,EAOGa,KAPH,CAOS,UAACC,KAAD,EAAuB;AAC5BU,wBAAAA,OAAO,CAACC,GAAR,CAAYX,KAAZ;;AACA,4BAAIA,KAAK,CAACL,QAAN,IAAmBK,KAAK,CAACL,QAAP,CAAkCiB,MAAlC,KAA6C,GAAnE,EAAwE;AACpEzB,0BAAAA,QAAQ,CAAC;AACLI,4BAAAA,IAAI,EAAEjC,SAAS,CAAC2C,kBADX;AAELJ,4BAAAA,OAAO,EAAE;AAFJ,2BAAD,CAAR;AAIH,yBALD,MAKO;AACHV,0BAAAA,QAAQ,CAAC;AACLI,4BAAAA,IAAI,EAAEjC,SAAS,CAAC2C,kBADX;AAELJ,4BAAAA,OAAO,EAAE;AAFJ,2BAAD,CAAR;AAIH;AACJ,uBApBD;AAqBH,qBA1BM,CADJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAP;;AAAA;AAAA;AAAA;AAAA;AAAA;AA8BH;AAnKL;AAAA;AAAA,+BAqK8BX,IArK9B,EAqKyC;AACjC,UAAIA,IAAI,YAAY2B,KAAhB,IAAyB,OAAO3B,IAAP,KAAgB,QAA7C,EAAuD;AACnD,aAAK,IAAI4B,CAAT,IAAc5B,IAAd,EAAoB;AAChBA,UAAAA,IAAI,CAAC4B,CAAD,CAAJ,GAAU/B,IAAI,CAAC0B,UAAL,CAAgBvB,IAAI,CAAC4B,CAAD,CAApB,CAAV;AACH;;AACD,eAAO5B,IAAP;AACH,OALD,MAKO;AACH,YAAI6B,SAAS,GAAG,+GAAhB;;AACA,YAAIA,SAAS,CAACC,IAAV,CAAe9B,IAAf,CAAJ,EAA0B;AACtB,iBAAO,IAAI+B,IAAJ,CAAS/B,IAAT,CAAP;AACH,SAFD,MAEO;AACH,iBAAOA,IAAP;AACH;AACJ;AACJ;AAnLL;;AAAA;AAAA","sourcesContent":["import { UIActions } from \"./UIActions\";\nimport { PutBillingReport } from \"./../interfaces/BillingReport\";\nimport { Dispatch, AnyAction } from \"redux\";\nimport { ThunkAction, ThunkDispatch } from \"redux-thunk\";\nimport { State } from \"../reducers/IndexReducer\";\nimport axios, { AxiosError, AxiosResponse } from 'axios'\nimport { CompensationEntry } from \"../interfaces/CompensationEntry\";\n\nexport const DataActions = {\n    FETCH_USER: 'fetch_user',\n    GOT_USER: 'got_user',\n\n    FETCH_MEMBERS: 'fetch_members',\n    GOT_MEMBERS: 'got_members',\n\n    FETCH_RANKS: 'fetch_ranks',\n    GOT_RANKS: 'got_ranks',\n\n    FETCH_CONTACTS: 'fetch_contacts',\n    GOT_CONTACTS: 'got_contacts',\n\n    FETCH_ORDERS: 'fetch_orders',\n    GOT_ORDERS: 'got_orders',\n\n    FETCH_OPEN_ORDERS: 'fetch_open_orders',\n    GOT_OPEN_ORDERS: 'got_open_orders',\n\n    FETCH_BILLING_REPORTS: 'fetch_billing_reports',\n    GOT_BILLING_REPORTS: 'got_billing_reports',\n    ADD_BILLING_REPORT: 'add_billing_report',\n    APPROVE_BILLING_REPORT: 'approve_billing_report',\n    EDIT_BILLING_REPORT: 'edit_billing_report',\n\n    FETCH_COMPENSATION_ENTRIES: 'fetch_compensation_entries',\n    GOT_COMPENSATION_ENTRIES: 'got_compensation_entries',\n    ADD_COMPENSATION_ENTRY: 'add_compensation_entry',\n\n    FETCH_USERS: 'fetch_users',\n    GOT_USERS: 'got_users'\n}\n\nexport class Data {\n    public static fetchUser(filter: Object = {}): ThunkAction<Promise<AnyAction>, State, void, AnyAction> {\n        return Data.fetchFromApi('http://localhost:8000/api/me', DataActions.FETCH_USER, DataActions.GOT_USER)\n    }\n\n    public static fetchContacts(filter: Object = {}): ThunkAction<Promise<AnyAction>, State, void, AnyAction> {\n        return Data.fetchFromApi('http://localhost:8000/api/contacts', DataActions.FETCH_CONTACTS, DataActions.GOT_CONTACTS)\n    }\n\n    public static fetchMembers(): ThunkAction<Promise<AnyAction>, State, void, AnyAction> {\n        return Data.fetchFromApi('http://localhost:8000/api/members', DataActions.FETCH_MEMBERS, DataActions.GOT_MEMBERS)\n    }\n\n    public static fetchRanks(): ThunkAction<Promise<AnyAction>, State, void, AnyAction> {\n        return Data.fetchFromApi('http://localhost:8000/api/ranks', DataActions.FETCH_RANKS, DataActions.GOT_RANKS)\n    }\n\n    public static fetchOrders(): ThunkAction<Promise<AnyAction>, State, void, AnyAction> {\n        return Data.fetchFromApi('http://localhost:8000/api/orders', DataActions.FETCH_ORDERS, DataActions.GOT_ORDERS)\n    }\n\n    public static fetchOpenOrders(): ThunkAction<Promise<AnyAction>, State, void, AnyAction> {\n        return Data.fetchFromApi('http://localhost:8000/api/billing-reports/open', DataActions.FETCH_OPEN_ORDERS, DataActions.GOT_OPEN_ORDERS)\n    }\n\n    public static fetchBillingReports(): ThunkAction<Promise<AnyAction>, State, void, AnyAction> {\n        return Data.fetchFromApi('http://localhost:8000/api/billing-reports', DataActions.FETCH_BILLING_REPORTS, DataActions.GOT_BILLING_REPORTS)\n    }\n\n    public static addBillingReport(data: PutBillingReport): ThunkAction<Promise<AnyAction>, State, void, AnyAction> {\n        return async (dispatch: ThunkDispatch<State, undefined, AnyAction>) => {\n            return new Promise<AnyAction>((resolve, reject) => {\n                dispatch({\n                    type: DataActions.ADD_BILLING_REPORT\n                })\n\n                axios.put('http://localhost:8000/api/billing-reports', data, { withCredentials: true }).then((response) => {\n                    dispatch({\n                        type: UIActions.NOTIFICATION_SUCCESS,\n                        payload: 'Gespeichert!'\n                    })\n                    dispatch(this.fetchBillingReports())\n                }).catch((error) => {\n                    dispatch({\n                        type: UIActions.NOTIFICATION_ERROR,\n                        payload: 'Ooopss....! Versuche es später erneut'\n                    })\n                })\n            })\n        }\n    }\n\n    public static approveBillingReport(id: string): ThunkAction<Promise<AnyAction>, State, void, AnyAction> {\n        return async (dispatch: ThunkDispatch<State, undefined, AnyAction>) => {\n            return new Promise<AnyAction>((resolve, reject) => {\n                dispatch({\n                    type: DataActions.APPROVE_BILLING_REPORT,\n                    payload: id\n                })\n\n                axios.post('http://localhost:8000/api/billing-reports/approve', { '_id': id }, { withCredentials: true }).then((response) => {\n                    dispatch({\n                        type: UIActions.NOTIFICATION_SUCCESS,\n                        payload: 'Genehmigt!'\n                    })\n                    dispatch(this.fetchBillingReports())\n                }).catch((error) => {\n                    dispatch({\n                        type: UIActions.NOTIFICATION_ERROR,\n                        payload: 'Ooopss....! Versuche es später erneut'\n                    })\n                })\n            })\n\n        }\n    }\n\n    public static editBillingReport(data: any): ThunkAction<Promise<AnyAction>, State, void, AnyAction> {\n        return async (dispatch: ThunkDispatch<State, undefined, AnyAction>) => {\n            return new Promise<AnyAction>((resolve, reject) => {\n                dispatch({\n                    type: DataActions.EDIT_BILLING_REPORT\n                })\n\n                axios.post('http://localhost:8000/api/billing-reports', data, { withCredentials: true }).then((response) => {\n                    dispatch({\n                        type: UIActions.NOTIFICATION_SUCCESS,\n                        payload: 'Gespeichert!'\n                    })\n                    dispatch(this.fetchBillingReports())\n                }).catch((error) => {\n                    dispatch({\n                        type: UIActions.NOTIFICATION_ERROR,\n                        payload: 'Ooopss....! Versuche es später erneut'\n                    })\n                })\n            })\n\n        }\n    }\n\n    public static fetchCompensationEntries(): ThunkAction<Promise<AnyAction>, State, void, AnyAction> {\n        return Data.fetchFromApi('http://localhost:8000/api/compensations', DataActions.FETCH_COMPENSATION_ENTRIES, DataActions.GOT_COMPENSATION_ENTRIES)\n    }\n\n    public static addCompensationEntry(data: CompensationEntry): ThunkAction<Promise<AnyAction>, State, void, AnyAction> {\n        return async (dispatch: ThunkDispatch<State, undefined, AnyAction>) => {\n            return new Promise<AnyAction>((resolve, reject) => {\n                dispatch({\n                    type: DataActions.ADD_COMPENSATION_ENTRY\n                })\n\n                axios.put('http://localhost:8000/api/compensations', data, { withCredentials: true }).then((response) => {\n                    dispatch({\n                        type: UIActions.NOTIFICATION_SUCCESS,\n                        payload: 'Gespeichert!'\n                    })\n                    dispatch(this.fetchCompensationEntries())\n                }).catch((error) => {\n                    dispatch({\n                        type: UIActions.NOTIFICATION_ERROR,\n                        payload: 'Ooopss....! Versuche es später erneut'\n                    })\n                })\n            })\n        }\n    }\n\n    public static fetchUsers(): ThunkAction<Promise<AnyAction>, State, void, AnyAction> {\n        return Data.fetchFromApi('http://localhost:8000/api/users', DataActions.FETCH_USERS, DataActions.GOT_USERS)\n    }\n\n    private static fetchFromApi(route: string, fetchAction: string, gotAction: string): ThunkAction<Promise<AnyAction>, State, void, AnyAction> {\n        return async (dispatch: Dispatch) => {\n            return new Promise<AnyAction>((resolve, reject) => {\n                dispatch({\n                    type: fetchAction\n                })\n\n                axios.get(route, { withCredentials: true }).then(response => {\n                    let data = Data.deepParser(response.data)\n\n                    resolve(dispatch({\n                        type: gotAction,\n                        payload: data\n                    }))\n                }).catch((error: AxiosError) => {\n                    console.log(error)\n                    if (error.response && (error.response as AxiosResponse).status === 401) {\n                        dispatch({\n                            type: UIActions.NOTIFICATION_ERROR,\n                            payload: 'Permission denied!'\n                        })\n                    } else {\n                        dispatch({\n                            type: UIActions.NOTIFICATION_ERROR,\n                            payload: 'Ooopss....! Versuche es später erneut'\n                        })\n                    }\n                })\n            })\n\n        }\n    }\n\n    private static deepParser(data: any) {\n        if (data instanceof Array || typeof data === 'object') {\n            for (let i in data) {\n                data[i] = Data.deepParser(data[i])\n            }\n            return data\n        } else {\n            let dateRegex = /[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])T(2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9].[0-9][0-9][0-9]Z/\n            if (dateRegex.test(data)) {\n                return new Date(data)\n            } else {\n                return data\n            }\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}