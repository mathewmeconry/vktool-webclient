{"ast":null,"code":"import _classCallCheck from \"/home/mathias/Documents/privat/VK/vk-tool/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mathias/Documents/privat/VK/vk-tool/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/mathias/Documents/privat/VK/vk-tool/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/mathias/Documents/privat/VK/vk-tool/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/mathias/Documents/privat/VK/vk-tool/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/mathias/Documents/privat/VK/vk-tool/src/app/views/Order.tsx\";\nimport React, { Component } from \"react\";\nimport { Page } from \"../components/Page\";\nimport { connect } from \"react-redux\";\nimport { Data } from \"../actions/DataActions\";\nimport Row from \"../components/Row\";\nimport Column from \"../components/Column\";\nimport Panel from \"../components/Panel\";\nimport FormEntry from \"../components/FormEntry\";\n\nvar _Order =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(_Order, _Component);\n\n  function _Order(props) {\n    var _this;\n\n    _classCallCheck(this, _Order);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(_Order).call(this, props));\n\n    if (!_this.props.order && !_this.props.loading) {\n      _this.props.loadOrders();\n    }\n\n    return _this;\n  }\n\n  _createClass(_Order, [{\n    key: \"renderPositions\",\n    value: function renderPositions() {\n      var positionsRendered = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.props.order.positions[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var position = _step.value;\n          positionsRendered.push(React.createElement(Row, {\n            className: \"position\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 35\n            },\n            __self: this\n          }, React.createElement(Column, {\n            className: \"col-1\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 36\n            },\n            __self: this\n          }, position.pos), React.createElement(Column, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 39\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            dangerouslySetInnerHTML: {\n              __html: position.text\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 40\n            },\n            __self: this\n          })), position.positionTotal ? React.createElement(Column, {\n            className: \"col-2\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 42\n            },\n            __self: this\n          }, \"CHF \", position.positionTotal, \".-\") : ''));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return positionsRendered;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.props.loading || !this.props.order) {\n        return React.createElement(Page, {\n          title: \"Loading...\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        });\n      }\n\n      if (this.props.order.execDates instanceof Date) {\n        this.props.order.execDates = [this.props.order.execDates];\n      }\n\n      return React.createElement(Page, {\n        title: this.props.order.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(Column, {\n        className: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(Panel, {\n        title: \"Informationen\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container-fluid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(FormEntry, {\n        id: \"title\",\n        title: \"Titel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, this.props.order.title), React.createElement(FormEntry, {\n        id: \"documentNr\",\n        title: \"Auftragsnummer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, this.props.order.documentNr), React.createElement(FormEntry, {\n        id: \"executionDates\",\n        title: \"Auftragsdaten\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, this.props.order.execDates ? this.props.order.execDates.map(function (date) {\n        return React.createElement(\"span\", {\n          className: \"badge badge-secondary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, date.toLocaleDateString());\n      }) : ''))))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(Column, {\n        className: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(Panel, {\n        title: \"Positionen\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container-fluid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, this.renderPositions(), React.createElement(Row, {\n        className: \"position\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(Column, {\n        className: \"col-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }), React.createElement(Column, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Total\")), React.createElement(Column, {\n        className: \"col-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"CHF \", this.props.order.total, \".-\")))))));\n    }\n  }]);\n\n  return _Order;\n}(Component);\n\nexport { _Order as default };\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    order: state.data.orders.byId[props.match.params.id],\n    loading: state.data.orders.loading\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, props) {\n  return {\n    loadOrders: function loadOrders() {\n      dispatch(Data.fetchOrders());\n    }\n  };\n}; //@ts-ignore\n\n\nexport var Order = connect(mapStateToProps, mapDispatchToProps)(_Order);","map":{"version":3,"sources":["/home/mathias/Documents/privat/VK/vk-tool/src/app/views/Order.tsx"],"names":["React","Component","Page","connect","Data","Row","Column","Panel","FormEntry","_Order","props","order","loading","loadOrders","positionsRendered","positions","position","push","pos","__html","text","positionTotal","execDates","Date","title","documentNr","map","date","toLocaleDateString","renderPositions","total","mapStateToProps","state","data","orders","byId","match","params","id","mapDispatchToProps","dispatch","fetchOrders","Order"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Page } from \"../components/Page\";\nimport { ThunkDispatch } from \"redux-thunk\";\nimport { State } from \"../reducers/IndexReducer\";\nimport { AnyAction } from \"redux\";\nimport { connect } from \"react-redux\";\nimport { Data } from \"../actions/DataActions\";\nimport Row from \"../components/Row\";\nimport Column from \"../components/Column\";\nimport Panel from \"../components/Panel\";\nimport FormEntry from \"../components/FormEntry\";\nimport OrderModel from \"../../shared/models/OrderModel\";\nimport PositionModel from \"../../shared/models/PositionModel\";\nimport ContactModel from \"../../shared/models/ContactModel\";\n\nexport interface OrderProps {\n    order: OrderModel,\n    loading: boolean,\n    loadOrders: Function,\n}\n\nexport default class _Order extends Component<OrderProps> {\n    constructor(props: OrderProps) {\n        super(props)\n\n        if (!this.props.order && !this.props.loading) {\n            this.props.loadOrders()\n        }\n    }\n\n    private renderPositions() {\n        let positionsRendered = []\n        for (let position of (this.props.order.positions as PositionModel[])) {\n            positionsRendered.push(\n                <Row className=\"position\">\n                    <Column className=\"col-1\">\n                        {position.pos}\n                    </Column>\n                    <Column>\n                        <div dangerouslySetInnerHTML={{ __html: position.text }}></div>\n                    </Column>\n                    {(position.positionTotal) ? <Column className=\"col-2\">CHF {position.positionTotal}.-</Column> : ''}\n                </Row>\n            )\n        }\n\n        return positionsRendered;\n    }\n\n    public render() {\n        if (this.props.loading || !this.props.order) {\n            return (\n                <Page title=\"Loading...\">\n\n                </Page>\n            )\n        }\n\n        if(this.props.order.execDates instanceof Date) {\n            this.props.order.execDates = [this.props.order.execDates]\n        }\n        \n        return (\n            <Page title={this.props.order.title}>\n                <Row>\n                    <Column className=\"col-md-6\">\n                        <Panel title=\"Informationen\">\n                            <div className=\"container-fluid\">\n                                <FormEntry id=\"title\" title=\"Titel\" >{this.props.order.title}</FormEntry>\n                                <FormEntry id=\"documentNr\" title=\"Auftragsnummer\" >{this.props.order.documentNr}</FormEntry>\n                                <FormEntry id=\"executionDates\" title=\"Auftragsdaten\">\n                                    {(this.props.order.execDates) ? this.props.order.execDates.map((date: Date) => {\n                                        return <span className=\"badge badge-secondary\">{date.toLocaleDateString()}</span>\n                                    }) : ''}\n                                </FormEntry>\n                            </div>\n                        </Panel>\n                    </Column>\n                </Row>\n                <Row>\n                    <Column className=\"col\">\n                        <Panel title=\"Positionen\">\n                            <div className=\"container-fluid\">\n                                {this.renderPositions()}\n                                <Row className=\"position\">\n                                    <Column className=\"col-1\">\n                                    </Column>\n                                    <Column>\n                                        <strong>Total</strong>\n                                    </Column>\n                                    <Column className=\"col-2\">\n                                        CHF {this.props.order.total}.-\n                                     </Column>\n                                </Row>\n                            </div>\n                        </Panel>\n                    </Column>\n                </Row>\n            </Page>\n        )\n    }\n}\n\nconst mapStateToProps = (state: State, props: any) => {\n    return {\n        order: state.data.orders.byId[props.match.params.id],\n        loading: state.data.orders.loading\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<State, undefined, AnyAction>, props: any) => {\n    return {\n        loadOrders: () => {\n            dispatch(Data.fetchOrders())\n        }\n    }\n}\n\n\n//@ts-ignore\nexport const Order = connect(mapStateToProps, mapDispatchToProps)(_Order)"]},"metadata":{},"sourceType":"module"}