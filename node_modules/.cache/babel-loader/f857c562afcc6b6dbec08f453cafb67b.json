{"ast":null,"code":"import _classCallCheck from \"/home/mathias/Documents/privat/VK/vk-tool/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mathias/Documents/privat/VK/vk-tool/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/mathias/Documents/privat/VK/vk-tool/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/mathias/Documents/privat/VK/vk-tool/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/mathias/Documents/privat/VK/vk-tool/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/mathias/Documents/privat/VK/vk-tool/src/app/views/Contact.tsx\";\nimport React, { Component } from \"react\";\nimport { Page } from \"../components/Page\";\nimport { connect } from \"react-redux\";\nimport { Data } from \"../actions/DataActions\";\nimport Row from \"../components/Row\";\nimport Column from \"../components/Column\";\nimport Panel from \"../components/Panel\";\nimport FormEntry from \"../components/FormEntry\";\nimport Loading from \"../components/Loading\";\n\nvar _Contact =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(_Contact, _Component);\n\n  function _Contact(props) {\n    var _this;\n\n    _classCallCheck(this, _Contact);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(_Contact).call(this, props));\n    _this.rank = '';\n    _this.groups = [];\n\n    if (!_this.props.contact && !_this.props.loading) {\n      _this.props.loadContacts();\n    }\n\n    if (_this.props.ranks.ids.length === 0 && !_this.props.loading) {\n      _this.props.loadRanks();\n    }\n\n    return _this;\n  }\n\n  _createClass(_Contact, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (this.props.loading || !this.props.contact) {\n        return React.createElement(Page, {\n          title: \"Kontakt\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        }, React.createElement(Loading, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }));\n      }\n\n      this.groups = this.props.contact.contactGroups;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        var _loop = function _loop() {\n          var id = _step.value;\n\n          var found = _this2.groups.find(function (el) {\n            return el._id === id;\n          });\n\n          if (found) {\n            _this2.rank = found.name;\n            return \"break\";\n          }\n        };\n\n        for (var _iterator = this.props.ranks.ids[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _ret = _loop();\n\n          if (_ret === \"break\") break;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return React.createElement(Page, {\n        title: this.props.contact.firstname + ' ' + this.props.contact.lastname,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(Column, {\n        className: \"col-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(Panel, {\n        title: \"Pers\\xF6nliche Informationen\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container-fluid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(FormEntry, {\n        id: \"firstname\",\n        title: \"Vorname\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, this.props.contact.firstname), React.createElement(FormEntry, {\n        id: \"lastname\",\n        title: \"Nachname\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, this.props.contact.lastname), React.createElement(FormEntry, {\n        id: \"rank\",\n        title: \"Rang\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, this.rank), React.createElement(FormEntry, {\n        id: \"birthday\",\n        title: \"Geburtstag\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, new Date(this.props.contact.birthday).toLocaleDateString('de-CH', {\n        year: 'numeric',\n        month: 'numeric',\n        day: 'numeric'\n      })), React.createElement(FormEntry, {\n        id: \"mail\",\n        title: \"E-Mail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: 'mailto:' + this.props.contact.mail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, this.props.contact.mail)), React.createElement(FormEntry, {\n        id: \"mailSecond\",\n        title: \"E-Mail 2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: 'mailto:' + this.props.contact.mailSecond,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, this.props.contact.mailSecond)), React.createElement(FormEntry, {\n        id: \"phoneFixed\",\n        title: \"Festnetz\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: 'tel:' + this.props.contact.phoneFixed,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, this.props.contact.phoneFixed)), React.createElement(FormEntry, {\n        id: \"phoneFixedSecond\",\n        title: \"Festnetz 2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: 'tel:' + this.props.contact.phoneFixedSecond,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, this.props.contact.phoneFixedSecond)), React.createElement(FormEntry, {\n        id: \"phoneMobile\",\n        title: \"Mobile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: 'tel:' + this.props.contact.phoneMobile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, this.props.contact.phoneMobile)), React.createElement(FormEntry, {\n        id: \"groups\",\n        title: \"Gruppen\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, this.groups ? this.groups.map(function (group) {\n        return React.createElement(\"span\", {\n          className: \"badge badge-primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, group.name);\n      }) : ''), React.createElement(FormEntry, {\n        id: \"remarks\",\n        title: \"Bemerkungen\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, this.props.contact.remarks)))), React.createElement(Column, {\n        className: \"col-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(Panel, {\n        title: \"Actions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        target: \"_blank\",\n        href: \"https://office.bexio.com/index.php/kontakt/show/id/\" + this.props.contact.bexioId,\n        className: \"btn btn-block btn-outline-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"In Bexio anschauen\"), React.createElement(\"a\", {\n        target: \"_blank\",\n        href: \"https://vkazu.sharepoint.com/leitung/Personalakten?viewpath=/leitung/Personalakten&id=/leitung/Personalakten/\" + this.props.contact.firstname + \" \" + this.props.contact.lastname,\n        className: \"btn btn-block btn-outline-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Personalakte \\xF6ffnen\")))));\n    }\n  }]);\n\n  return _Contact;\n}(Component);\n\nexport { _Contact as default };\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    contact: state.data.contacts.byId[props.match.params.id] || state.data.members.byId[props.match.params.id],\n    ranks: state.data.ranks,\n    loading: state.data.contacts.loading || state.data.ranks.loading || state.data.members.loading\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, props) {\n  return {\n    loadContacts: function loadContacts() {\n      dispatch(Data.fetchContacts());\n    },\n    loadRanks: function loadRanks() {\n      dispatch(Data.fetchRanks());\n    }\n  };\n}; //@ts-ignore\n\n\nexport var Contact = connect(mapStateToProps, mapDispatchToProps)(_Contact);","map":{"version":3,"sources":["/home/mathias/Documents/privat/VK/vk-tool/src/app/views/Contact.tsx"],"names":["React","Component","Page","connect","Data","Row","Column","Panel","FormEntry","Loading","_Contact","props","rank","groups","contact","loading","loadContacts","ranks","ids","length","loadRanks","contactGroups","id","found","find","el","_id","name","firstname","lastname","Date","birthday","toLocaleDateString","year","month","day","mail","mailSecond","phoneFixed","phoneFixedSecond","phoneMobile","map","group","remarks","bexioId","mapStateToProps","state","data","contacts","byId","match","params","members","mapDispatchToProps","dispatch","fetchContacts","fetchRanks","Contact"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Page } from \"../components/Page\";\nimport { ThunkDispatch } from \"redux-thunk\";\nimport { State } from \"../reducers/IndexReducer\";\nimport { AnyAction } from \"redux\";\nimport { connect } from \"react-redux\";\nimport { Data } from \"../actions/DataActions\";\nimport Row from \"../components/Row\";\nimport Column from \"../components/Column\";\nimport Panel from \"../components/Panel\";\nimport FormEntry from \"../components/FormEntry\";\nimport { DataInterface } from \"../reducers/DataReducer\";\nimport ContactGroupModel from \"../../shared/models/ContactGroupModel\";\nimport ContactModel from \"../../shared/models/ContactModel\";\nimport Loading from \"../components/Loading\";\n\nexport interface ContactProps {\n    contact: ContactModel,\n    ranks: DataInterface<ContactGroupModel>,\n    loading: boolean,\n    loadContacts: Function,\n    loadRanks: Function\n}\n\nexport default class _Contact extends Component<ContactProps> {\n    private rank: string;\n    private groups: Array<ContactGroupModel>\n\n    constructor(props: ContactProps) {\n        super(props)\n        this.rank = ''\n        this.groups = []\n\n        if (!this.props.contact && !this.props.loading) {\n            this.props.loadContacts()\n        }\n\n        if (this.props.ranks.ids.length === 0 && !this.props.loading) {\n            this.props.loadRanks()\n        }\n    }\n\n    public render() {\n        if (this.props.loading || !this.props.contact) {\n            return (\n                <Page title=\"Kontakt\">\n                    <Loading />\n                </Page>\n            )\n        }\n\n        this.groups = this.props.contact.contactGroups as Array<ContactGroupModel>\n\n        for (let id of this.props.ranks.ids) {\n            let found = this.groups.find((el: ContactGroupModel) => el._id === id)\n            if (found) {\n                this.rank = found.name\n                break\n            }\n        }\n\n        return (\n            <Page title={this.props.contact.firstname + ' ' + this.props.contact.lastname}>\n                <Row>\n                    <Column className=\"col-6\">\n                        <Panel title=\"Persönliche Informationen\">\n                            <div className=\"container-fluid\">\n                                <FormEntry id=\"firstname\" title=\"Vorname\" >{this.props.contact.firstname}</FormEntry>\n                                <FormEntry id=\"lastname\" title=\"Nachname\" >{this.props.contact.lastname}</FormEntry>\n                                <FormEntry id=\"rank\" title=\"Rang\">{this.rank}</FormEntry>\n                                <FormEntry id=\"birthday\" title=\"Geburtstag\">{new Date(this.props.contact.birthday).toLocaleDateString('de-CH', { year: 'numeric', month: 'numeric', day: 'numeric' })}</FormEntry>\n                                <FormEntry id=\"mail\" title=\"E-Mail\"><a href={'mailto:' + this.props.contact.mail}>{this.props.contact.mail}</a></FormEntry>\n                                <FormEntry id=\"mailSecond\" title=\"E-Mail 2\"><a href={'mailto:' + this.props.contact.mailSecond}>{this.props.contact.mailSecond}</a></FormEntry>\n                                <FormEntry id=\"phoneFixed\" title=\"Festnetz\"><a href={'tel:' + this.props.contact.phoneFixed}>{this.props.contact.phoneFixed}</a></FormEntry>\n                                <FormEntry id=\"phoneFixedSecond\" title=\"Festnetz 2\"><a href={'tel:' + this.props.contact.phoneFixedSecond}>{this.props.contact.phoneFixedSecond}</a></FormEntry>\n                                <FormEntry id=\"phoneMobile\" title=\"Mobile\"><a href={'tel:' + this.props.contact.phoneMobile}>{this.props.contact.phoneMobile}</a></FormEntry>\n                                <FormEntry id=\"groups\" title=\"Gruppen\">\n                                    {(this.groups) ? this.groups.map((group: ContactGroupModel) => {\n                                        return <span className=\"badge badge-primary\">{group.name}</span>\n                                    }) : ''}\n                                </FormEntry>\n                                <FormEntry id=\"remarks\" title=\"Bemerkungen\" >{this.props.contact.remarks}</FormEntry>\n                            </div>\n                        </Panel>\n                    </Column>\n                    <Column className=\"col-6\">\n                        <Panel title=\"Actions\">\n                            <a target=\"_blank\" href={\"https://office.bexio.com/index.php/kontakt/show/id/\" + this.props.contact.bexioId} className=\"btn btn-block btn-outline-primary\">In Bexio anschauen</a>\n                            <a target=\"_blank\" href={\"https://vkazu.sharepoint.com/leitung/Personalakten?viewpath=/leitung/Personalakten&id=/leitung/Personalakten/\" + this.props.contact.firstname + \" \" + this.props.contact.lastname} className=\"btn btn-block btn-outline-primary\">Personalakte öffnen</a>\n                        </Panel>\n                    </Column>\n                </Row>\n            </Page>\n        )\n    }\n}\n\nconst mapStateToProps = (state: State, props: any) => {\n    return {\n        contact: state.data.contacts.byId[props.match.params.id] || state.data.members.byId[props.match.params.id],\n        ranks: state.data.ranks,\n        loading: state.data.contacts.loading || state.data.ranks.loading || state.data.members.loading\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<State, undefined, AnyAction>, props: any) => {\n    return {\n        loadContacts: () => {\n            dispatch(Data.fetchContacts())\n        },\n        loadRanks: () => {\n            dispatch(Data.fetchRanks())\n        }\n    }\n}\n\n\n//@ts-ignore\nexport const Contact = connect(mapStateToProps, mapDispatchToProps)(_Contact)"]},"metadata":{},"sourceType":"module"}